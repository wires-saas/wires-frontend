<div class="flex justify-content-between align-items-center mb-2 w-full">
    <span class="text-900 text-xl font-semibold" i18n><i class="fa-regular fa-puzzle-piece mr-1"></i> Blocks Library</span>

    <span class="p-input-icon-left">
        <i class="pi pi-search"></i>
        <input type="text" pInputText i18n-placeholder placeholder="Search for block" class="w-12rem sm:w-full">
    </span>

</div>

<div class="m-0 p-0 border-1 surface-overlay surface-border border-round flex w-full">
    <ul *ngIf="blocks.length; else loadingOrEmpty" class="list-none m-0 p-3 grid">

        <!-- SHOWN BLOCKS -->
        <app-block-square-card *ngFor="let block of blocks | arraySort:{displayName:'asc'}"
                               [block]="block" class="col-4 p-2"
                               (contextmenu)="showBlockContextualMenu($event, block)">
        </app-block-square-card>

        <button (click)="fetchPreviousBlocks.emit()" [disabled]="!canFetchPreviousBlocks"
                pButton pRipple type="button"
                i18n-label label="Previous"
                icon="fa-regular fa-left" iconPos="left"
                class="col-6 p-button-secondary p-button-text"></button>
        <button (click)="fetchNextBlocks.emit()" [disabled]="!canFetchNextBlocks"
                pButton pRipple type="button"
                i18n-label label="Next"
                icon="fa-regular fa-right" iconPos="right"
                class="col-6 p-button-secondary p-button-text"></button>

    </ul>

    <ng-template #loadingOrEmpty>
        <div class="flex justify-content-center align-items-center w-full gap-4 p-3">
            <div class="flex"><p-progressSpinner *ngIf="loadingBlocks" class="flex p-mr-2" strokeWidth="5" styleClass="p-mr-2" [style]="{width: '50px', height: '50px'}"></p-progressSpinner></div>
            <div class="flex text-900">Loading blocks...</div>
        </div>
    </ng-template>
</div>



<p-contextMenu #menu [model]="blockMenu">
    <ng-template pTemplate="item" let-item>
        <a pRipple class="flex align-items-center p-menuitem-link">
            <span [class]="item.icon"></span>
            <span class="ml-2">{{ item.label }}</span>
            <i *ngIf="item.items" class="pi pi-angle-right ml-auto"></i>
        </a>
    </ng-template>
</p-contextMenu>


