<div class="grid">
    <div class="col-12 md:col-12 xl:col-12 ">

        <app-generic-data-card i18n-title title="Feeds Management" i18n-buttonLabel buttonLabel="Add Feed" [buttonIcon]="'pi pi-plus'" (buttonClick)="showDialog()">
            <app-feed-list [loading]="loading"
                           [feeds]="feeds"
                           (onEnableFeed)="onEnableFeed($event)"
                           (onDisableFeed)="onDisableFeed($event)"
                           [canRunFeed]="canRunFeed"
                           (onRunFeed)="onRunFeed($event)"
                           [canEditFeed]="canEditFeed"
                           (onEditFeed)="onEditFeed($event)"
                           [canDeleteFeed]="canDeleteFeed"
                           (onDeleteFeed)="onDeleteFeed($event)"
            ></app-feed-list>
        </app-generic-data-card>

    </div>

    <div class="col-12">

        <div class="card">
            <h5 i18n>Last Executions</h5>
            <app-feed-run-list [loading]="loading" [runs]="feedRuns" (runSelect)="navigateToFeedRun($event)"></app-feed-run-list>
        </div>

    </div>

    <div class="col-12 md:col-12 xl:col-6">

        <div class="card">
            <h5 i18n>Auto Scheduling</h5>
            <p i18n>
                Scraping frequency can be too high, scraping same articles multiple times, or too low, missing articles
                <br/>
                If enabled, auto scheduling will adjust frequency in order to find the right spot
            </p>


            <p-toggleButton [(ngModel)]="autoSchedule" (onChange)="toggleAutoSchedule($event)"
                            i18n-onLabel onLabel="Enabled" i18n-offLabel offLabel="Disabled"
                            class="block text-center" [style]="{'width': '10em'}"></p-toggleButton>
        </div>

    </div>
</div>

<app-create-or-update-feed *ngIf="currentOrgSlug" [organizationSlug]="currentOrgSlug"></app-create-or-update-feed>


<p-confirmDialog i18n-header header="Permanently Delete Feed" key="confirm-delete-feed" icon="pi pi-exclamation-triangle"
                 i18n-message message="Are you sure you want to permanently delete feed and not disable it ? Note this will not delete any article."
                 defaultFocus="none"
                 acceptButtonStyleClass="p-button-danger"
                 rejectButtonStyleClass="p-button-text text-color-secondary"></p-confirmDialog>
